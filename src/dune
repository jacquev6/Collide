; THIS FILE IS GENERATED by ./dune.py
; MANUAL CHANGES WILL BE LOST

(library
  (name Collide)
  (modules Ring Drawer Simulation Application GraphicalApplication)
  (libraries General JsOfOCairo)
)


(executable
  (name collide_cli)
  (public_name collide_cli)
  (modules collide_cli)
  (libraries Collide cairo2)
)


(executable
  (name collide_gtk)
  (public_name collide_gtk)
  (modules collide_gtk)
  (libraries Collide cairo2 threads lablgtk2 cairo2-gtk)
)


(rule
  (targets node_modules.sentinel)
  (action (progn
    (run %{bin:npm} install "file-saver@1.3.3")
    (write-file node_modules.sentinel sentinel)
  ))
)

(rule
  (targets FileSaver.js)
  (deps node_modules.sentinel)
  (action (progn
    (with-stdout-to %{targets} (run %{bin:browserify} -s FileSaver node_modules/file-saver/FileSaver.min.js))
  ))
)

(executable
  (name collide_browser)
  (modules collide_browser)
  (libraries Collide)
  (preprocess (pps "js_of_ocaml-ppx"))
  (js_of_ocaml (flags "+nat.js"))
)

(rule
  (targets bootstrap.min.css)
  (action (run %{bin:wget} https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css))
)

(rule
  (targets bootstrap.min.js)
  (action (run %{bin:wget} https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js))
)

(rule
  (targets popper.min.js)
  (action (run %{bin:wget} https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js))
)

(rule
  (targets jquery-3.2.1.slim.min.js)
  (action (run %{bin:wget} https://code.jquery.com/jquery-3.2.1.slim.min.js))
)

(alias
  (name collide_browser)
  (deps collide_browser.html bootstrap.min.css bootstrap.min.js popper.min.js jquery-3.2.1.slim.min.js FileSaver.js collide_browser.bc.js)
)


(executable
  (name unit_test)
  (modules unit_test)
  (libraries Collide)
)

(rule
  (targets unit_test.sentinel)
  (deps unit_test.bc)
  (action (progn
    (run %{exe:unit_test.bc})
    (write-file unit_test.sentinel sentinel)
  ))
)

(alias
  (name runtest)
  (deps unit_test.sentinel)
)

